# **Project Requirements Document: The Midrash Aggadah Website**

The following table outlines the detailed functional requirements of The Midrash Aggadah website whose URL will be https://www.midrashaggadah.com.

| Requirement ID | Description               | User Story                                                                                       | Expected Behavior/Outcome                                                                                                     |
|-----------------|---------------------------|--------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| FR000          | Using a Biblical color palette. | As a user, I want a website with a modern, high-quality feel that uses an "ancient" color palette. | The system should use a color palette that evokes parchment, but with a sleek design and style. |
| FR001          | Creating a homepage for the website. | As a user, I want a homepage that contains the "mission statement" of the website along with clear navigational functionality. | The system should create a one line mission statement that begins with "Welcome to Midrash Aggadah, a website that", along with clickable widgets with images and short text descriptions that redirect a user to the respective webpage. |
| FR002          | Creating a side menu for the website. | As a user, I want a consistent side menu that is easy to read and understand. | The system should provide a left side menu that is identical for all pages on the website and which adjusts all content of each webpage accordingly so that no page-specific content overlaps with the menu. The side menu should be sticky and stay in view as the user scrolls up and down the page. |
| FR002          | Using a database of shiurim data. | As a user, I want a single source-of-truth that all my shiurim are sourced from. | The system should use the shiurim_data.json file to create all of its shiurim-related content. The file contains titles, audio and source doc links, tags, and other information like the year the shiur was given in. It also contains hierarchical categories "category", "sub_category" and "english_sefer" which should be used for search filtering and cataloging. |
| FR003          | Pulling audio and text from Amazon S3. | As a user, I want to stream shiurim and have source text loaded on my website. | The system should pull .mp3 audio files and .docx text files from Amazon S3 links. The S3_BUCKET variable is "midrash-aggadah", the S3_REGION variable is "eu-north-1", and the S3_BASE_URL is f"https://{S3_BUCKET}.s3.{S3_REGION}.amazonaws.com/". The audio files should be streamable and downloadable, while the docx files should be loadable as source text embedded on a webpage and downloadable as a PDF. |
| FR004          | Creating a search page. | As a user, I want a way to search through the shiurim on the website. | The system should provide a page with a search bar at the top and search functionality that allows the user to type a search query, and the search bar should have as greyed-out default text "Search through {} shiurim", where the {} is replaced by the total number of entries in the catalog. |
| FR005          | Filtering a search query. | As a user, I want a way to filter potential search results before I see them. | The system should provide a series of drop-down filters that a user can click and highlight which will limit the search results accordingly. These filters should have a multi-select option, with check boxes to the left of the actual text, and the number of corresponding entries in the catalog to the right of the text. The filters should be based on "category", "sub_category", and "english_sefer". All the filter keys and values should be capitalized with spaces instead of underscores. |
| FR006          | Resetting a search result. | As a user, I want the ability to reset my search results. | The system should provide a reset button next to the search bar, and should reset whenever the search page is refreshed. |
| FR007          | Sorting the search results. | As a user, I want to have the ability to sort search results by a series of standard criteria.  | The system should provide a list of options to sort the search results by title, year, and shiur length (based on length of the .mp3 audio file), which will sort the results automatically when an option is selected. |
| FR008          | Displaying the search results.  | As a user, I want a layout of search results that is familiar, with a design and color scheme identical to Google's search engine results. | The system should provide search results that mention category, sub_category, english_title, hebrew_title, a clickable Googledoc icon that hyperlinks the corresponding source_sheet_link, and a clickable Headphones icon that hyperlinks the corresponding audio_recording_link.  |
| FR009          | Using tags for search. | As a user, I want to type keywords and have search results that use them. | The system should provide a way to prioritize search results based on the tags of shiurim. |
| FR010          | Creating a catalog page. | As a user, I want a way to see a directory of all the shiurim on the website. | The system should provide a page with a table of contents at the top and tables for each english_sefer that have five columns: index (an integer starting from 1), english_title, hebrew_title, source_sheet_link, audio_recording_link, with a clickable Googledoc icon that hyperlinks the corresponding source_sheet_link, and a clickable Headphones icon that hyperlinks the corresponding audio_recording_link. The tables should have the corresponding english_sefer centered above them. The tables should appear to pop out very slightly from the page using a shadow effect and have rounded edges. |
| FR011          | Navigating the table of contents. | As a user, I want to have an interactive table of contents. | The system should provide a way to click all the english_sefer values in the table of contents and scroll down to the corresponding table. |
| FR012          | Displaying the table of contents. | As a user, I want an aesthetically pleasing table of contents that also gives me a clear sense of the hierarchy of the shiurim on the website. | The system should create a table of contents with a layout that has the category centered above the respective sub_category values which are listed in a row horizontally, and the sub_category centered above the respective english_sefer values which are listed in a column vertically. All three categories should be next to each other from left to right instead of one on top of the other. |
| FR0113          | Allowing 'Back to Top'. | As a user, I want to have an easy way to return to the top of certain pages. | The system should create a clickable 'Back to Top' button that is visible on the bottom right corner of the 'Search' and 'Catalog' pages, which when clicked scrolls the user back up to the header. |
| FR0114          | Providing pages to stream or download suirim. | As a user, I want a place to stream a shiur's audio and read the source text. | The system should redirect a user who clicks on a specific shiur either in the search result or in the catalog tables to the corresponding page for that shiur. The shiur should have an audio bar with a play and pause button, an icon showing how long the audio recording is, what year the shiur was given in, and the "category", "sub_category". It should allow a user to move through the recording by sliding a circular button along the bar. There should also an icon to download the shiur to the right of the audio bar which downloads the .mp3 from S3. Directly below the fold, the corresponding source sheet should be embedded on the page from the .docx file in a readable format so a user can easily scroll through the text. There should be an icon to download the .docx source text from S3 as a PDF as well next to the right of the audio bar. |
| FR0115          | Creating a page for sefarim. | As a user, I want a page that shows me information about the website's sefarim (i.e. books). | The system should provide a short summary along with an embedded image for serfarim. To startl, there should be one sefer called "Midrashim about Moshe Rabbeinu". This is the Googledoc link to the sefer: https://docs.google.com/document/d/1NeRjLlGqhlqRPO2pJ1F48VmZzkmLOTCbCKehJQg-WB4/edit?usp=drive_link. If clicked on, it should redirect the user to a page dedicated to the sefer which loads all of its source text in an easily-navigatable way. It is a book, so it should be loaded on the page in a way that is intuitive for a book that is meant to be read. The book is a few hundred pages long and it should be viewable by scrolling down, with the page numbers (e.g. 10 out of 350) displayed in the bottom right corner and a scroll bar on the right that can be dragged up and down to help the user navigate. |
| FR0117          | Browsing a sefer with footnotes. | As a user, I want to be able to read a sefer on the website in a seamless way, with clear navigation available between chapters and hyperlinks to footnotes. | The system should take the file "midrash-haaliyah.md", which is a work in Hebrew comprised of three chapters (פרק א, ב, ג) each of which is then comprised of 16 sections (e.g. משנה א). It should have a page dedicted to rendering this sefer in a browsable way, in a way that is friendly for a Hebrew speaking audience (right to left) and with clearly defined chapter and section hyperlinks at the top. The format of the page should resemble the following: http://mayim.org.il/?parasha=%D7%94%D7%9E%D7%93%D7%91%D7%A8#gsc.tab=0. This page has the content on the right with hyperlinked footnotes, and a box on the left which contains the footnotes as though they were a running commentary alongside the content, and if a user clicks on a footnote they get brought to the relevant footnote on the left. This page should be avalable at the URL https://www.midrashaggadah.com/sefer/midrash-haaliyah. There should be a clickable CTA to this page added to the top of the page Midrashim about Moshe Rabbeinu with the CTA saying "for the Hebrew version click here". |
| FR0118          | Updating the Homepage to be leaner and include Search. | As a user, I want a way to search from the Homepage and have a straightforward UI. | The system should redesign the Homepage with the following structure. A large rectangular rendering of the image located in "public/images/moshe_aharon_hur_img.png" shoudl be rendered towards the top of the page. Beneath the image should be the header "Welcome to Midrash Aggadah", and the sub-header should have a message like: "A website dedicated to spreading the wisdom and beauty of the teachings of the great Rabbis" (please reword in a more compelling way). Underneath the sub-header have a text which says something like: "Explore hundreds of shiurim, including audio recordings and source sheets, along with original Sefarim in English and Hebrew." There should also be a Hebrew and English date that is kept up-to-date on the top right of the page. Underneath the above "Explore hundreds etc" text, there should be a search bar and filters which is identical to the search bar and filters that display at the top of the "Search" page (but do not render the search result containers from the "Search" page on the Home page). Finally, Underneath the search bar and filters, there should be a "Or, Browse Sample Shiurim" header and three containers with an overview of randomized shiurim and a "View All Shiurim" CTA underneath them (for this please keep the existing content). |
| FR0119          | Having a sefer with footnotes whose content is easy to navigate and consume. | As a user, I want to be able to read a sefer on the website in a seamless way, with clear navigation available between chapters and hyperlinks to footnotes. | The system should work with the file "darosh-darash-moshe.md", which is a work in a combination of English and Hebrew (but primarily English) comprised of a short introduction and three lengthly chapters - Chapter 1. Givat Rephidim, Chapter 2: Har Sinai, Chapter 3: Hor HaHar. Each chapter has three Parts, each of which has an Introduction, four sections, and Notes (i.e. footnotes). It should have a page dedicted to rendering this sefer in a browsable way, in a way that is friendly for an English-speaking audience (left to right) and with clearly defined chapter, part and section hyperlinks at the top. The format of the page should resemble the following: http://mayim.org.il/?parasha=%D7%94%D7%9E%D7%93%D7%91%D7%A8#gsc.tab=0. To be explicit: the above hyperlink references a page which has the content on the right with hyperlinked footnotes, and a box on the left which contains the footnotes as though they were a running commentary alongside the content, and if a user clicks on a footnote they get brought to the relevant footnote on the left. Please have this page follow a similar concept, but have the the content on the left with the box of running footnotes on the right. This page should be available at the URL https://www.midrashaggadah.com/sefer/darosh-darash-moshe. Any images that are in the work which need to be rendered should render seamlessly from the respective image available in the "images" folder. In addition, on the Sefarim page, please update the middle container with the title "Darosh Darash Moshe" and have the text contain a short description of the work. |